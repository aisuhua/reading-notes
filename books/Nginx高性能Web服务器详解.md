# Nginx高性能Web服务器详解

## 目录

```
第1章 nginx初探
	1.1 nginx的历史
	1.2 常见服务器产品介绍
		1.2.1 apache服务器
		1.2.2 microsoft iis
		1.2.3 tomcat服务器
		1.2.4 lighttpd服务器
		1.2.5 nginx诞生记
		1.2.6 版本变更大事记
	1.3 nginx的功能特性
		1.3.1 基本http服务
		1.3.2 高级http服务
		1.3.3 邮件代理服务
	1.4 常用功能介绍
		1.4.1 http代理和反向代理
		1.4.2 负载均衡
		1.4.3 web缓存
	1.5 本章小结
第2章 nginx服务器的安装部署
	2.1 如何获取nginx服务器安装文件
		2.1.1 获取新版本的nginx服务器
		2.1.2 获取nginx服务器的历史版本
	2.2 安装nginx服务器和基本配置
		2.2.1 windows版本的安装
		2.2.2 linux版本的编译和安装：准备工作
		2.2.3 linux版本的编译和安装：nginx软件的自动脚本
		2.2.4 linux版本的编译和安装：nginx源代码的编译和安装
	2.3 nginx服务的启停控制
		2.3.1 nginx服务的信号控制
		2.3.2 nginx服务的启动
		2.3.3 nginx服务的停止
		2.3.4 nginx服务的重启
		2.3.5 nginx服务器的升级
	2.4 nginx服务器基础配置指令
		2.4.1 nginx.conf文件的结构
		2.4.2 配置运行nginx服务器用户（组）
		2.4.3 配置允许生成的worker process数
		2.4.4 配置nginx进程pid存放路径
		2.4.5 配置错误日志的存放路径
		2.4.6 配置文件的引入
		2.4.7 设置网络连接的序列化
		2.4.8 设置是否允许同时接收多个网络连接
		2.4.9 事件驱动模型的选择
		2.4.10 配置最大连接数
		2.4.11 定义mime-type
		2.4.12 自定义服务日志
		2.4.13 配置允许sendfile方式传输文件
		2.4.14 配置连接超时时间
		2.4.15 单连接请求数上限
		2.4.16 配置网络监听
		2.4.17 基于名称的虚拟主机配置
		2.4.18 基于ip的虚拟主机配置
		2.4.19 配置location块
		2.4.20 配置请求的根目录
		2.4.21 更改location的uri
		2.4.22 设置网站的默认首页
		2.4.23 设置网站的错误页面
		2.4.24 基于ip配置nginx的访问权限
		2.4.25 基于密码配置nginx的访问权限
	2.5 nginx服务器基础配置实例
		2.5.1 测试myserver1的访问
		2.5.2 测试myserver2的访问
	2.6 本章小结
第3章 nginx服务器架构初探
	3.1 模块化结构
		3.1.1 什么是“模块化设计”
		3.1.2 nginx模块化结构
	3.2 nginx服务器的web请求处理机制
		3.2.1 多进程方式
		3.2.2 多线程方式
		3.2.3 异步方式
		3.2.4 nginx服务器如何处理请求
		3.2.5 nginx服务器的事件处理机制
	3.3 nginx服务器的事件驱动模型
		3.3.1 事件驱动模型概述
		3.3.2 nginx中的事件驱动模型
		3.3.3 select库
		3.3.4 poll库
		3.3.5 epoll库
		3.3.6 rtsig模型
		3.3.7 其他事件驱动模型
	3.4 设计架构概览
		3.3.1 nginx服务器架构
		3.3.2 nginx服务器的进程
		3.3.3 进程交互
		3.3.4 run loops事件处理循环模型
	3.5 本章小结
第4章 nginx服务器的高级配置
	4.1 针对ipv4的内核7个参数的配置优化
	4.2 针对cpu的nginx配置优化的2个指令
	4.3 与网络连接相关的配置的4个指令
	4.4 与事件驱动模型相关的配置的8个指令
	4.5 本章小结
第5章 nginx服务器的gzip压缩
	5.1 由ngx_http_gzip_module模块处理的9个指令
	5.2 由ngx_http_gzip_static_module模块处理的指令
	5.3 由ngx_http_gunzip_module模块处理的2个指令
	5.4 gzip压缩功能的使用
		5.4.1 gzip压缩功能综合配置实例
		5.4.2 gzip压缩功能与ie6浏览器运行脚本的兼容问题
		5.4.3 nginx与其他服务器交互时产生的gzip压缩功能相关问题
	5.5 本章小结
第6章 nginx服务器的rewrite功能
	6.1 nginx后端服务器组的配置的5个指令
	6.2 rewrite功能的配置
		6.2.1 “地址重写”与“地址转发”
		6.2.2 rewrite规则
		6.2.3 if指令
		6.2.4 break指令
		6.2.5 rewrite指令
		6.2.6 rewrite_log指令
		6.2.7 set指令
		6.2.8 uninitialized_variable_warn指令
		6.2.9 rewrite常用全局变量
	6.3 rewrite的使用
		6.3.1 域名跳转
		6.3.2 域名镜像
		6.3.3 独立域名
		6.3.4 目录自动添加“/”
		6.3.5 目录合并
		6.3.6 防盗链
	6.4 本章小结
第7章 nginx服务器的代理服务
	7.1 正向代理与反向代理的概念
	7.2 nginx服务器的正向代理服务
		7.2.1 nginx服务器正向代理服务的配置的3个指令
		7.2.2 nginx服务器正向代理服务的使用
	7.3 nginx服务器的反向代理服务
		7.3.1 反向代理的基本设置的21个指令
		7.3.2 proxy buffer的配置的7个指令
		7.3.3 proxy cache的配置的12个指令
	7.4 nginx服务器的负载均衡
		7.4.1 什么是负载均衡
		7.4.2 nginx服务器负载均衡配置
		7.4.3 配置实例一：对所有请求实现一般轮询规则的负载均衡
		7.4.4 配置实例二：对所有请求实现加权轮询规则的负载均衡
		7.4.5 配置实例三：对特定资源实现负载均衡
		7.4.6 配置实例四：对不同域名实现负载均衡
		7.4.7 配置实例五：实现带有url重写的负载均衡
	7.5 本章小结
第8章 nginx服务器的缓存机制
	8.1 web缓存技术简述
	8.2 404错误驱动web缓存
	8.3 资源不存在驱动web缓存
	8.4 基于memcached的缓存机制的6个指令
	8.5 proxy cache缓存机制
	8.6 nginx与squid组合
		8.6.1 squid服务器的配置
		8.6.2 nginx服务器的配置
	8.7 基于第三方模块ncache的缓存机制
	8.8 本章小结
第9章 nginx服务器的邮件服务
	9.1 邮件服务
	9.2 nginx邮件服务的配置的12个指令
	9.3 nginx邮件服务配置实例
	9.4 本章小结
第10章 nginx源码结构
	10.1 nginx源码的3个目录结构
		10.1.1 core目录
		10.1.2 event目录
		10.1.3 http目录
	10.2 nginx源码的模块化结构
		10.2.1 公共功能
		10.2.2 配置解析
		10.2.3 内存管理
		10.2.4 事件驱动
		10.2.5 日志管理
		10.2.6 http服务
		10.2.7 mail服务
		10.2.8 模块支持
	10.3 本章小结
第11章 nginx基本数据结构
	11.1 ngx_module_s结构体
		11.1.1 分类标识ctx_index
		11.1.2 模块计数器index
		11.1.3 模块上下文
		11.1.4 回调函数
	11.2 ngx_command_s结构体
		11.2.1 type成员
		11.2.2 函数指针set
		11.2.3 conf和offset
	11.3 3个基本模块的指令集数组结构
		11.3.1 http模块
		11.3.2 event模块
		11.3.3 mail模块
	11.4 ngx_ pool_s结构体
		11.4.1 ngx_pool_data_t结构体
		11.4.2 ngx_pool_large_s结构体
		11.4.3 ngx_pool_cleanup_s结构体
	11.5 nginx socket相关的数据结构
		11.5.1 ngx_listening_s结构体
		11.5.2 ngx_http_conf_port_t结构体
		11.5.3 ngx_http_conf_addr_t结构体
	11.6 ngx_event_s结构体
	11.7 ngx_connection_s结构体
	11.8 ngx_cycle_s结构体
	11.9 ngx_conf_s结构体
		11.9.1 配置上下文*ctx
		11.9.2 指令类型type
	11.10 ngx_signal_t结构体
	11.11 ngx_process_t结构体
	11.12 本章小结
第12章 nginx的启动初始化
	12.1 nginx启动过程概览
		12.1.1 程序初始化
		12.1.2 启动多进程
	12.2 nginx的初始化
		12.2.1 读取并处理启动参数
		12.2.2 继承socket
		12.2.3 初始化时间及建立新的cycle结构
		12.2.4 建立core模块上下文结构
		12.2.5 解析配置文件
		12.2.6 初始化core模块上下文
		12.2.7 创建pid文件
		12.2.8 处理监听socket
		12.2.9 信号设置
		12.2.10 启动master process
		12.2.11 nginx初始化过程总结
	12.3 nginx的启动
		12.3.1 主进程设置信号阻塞
		12.3.2 设置进程标题
		12.3.3 启动工作进程
		12.3.4 启动缓存索引重建及管理进程
		12.3.5 循环处理信号
		12.3.6 nginx启动过程总结
	12.4 本章小结
第13章 nginx的时间管理
	13.1 获取系统时间的一般方法
		13.1.1 系统调用的开销
		13.1.2 gettimeofday()
	13.2 nginx时间管理的工作原理
		13.2.1 时间缓存的更新
		13.2.2 更新时间缓存的时机
	13.3 缓存时间的精度
		13.3.1 设置缓存时间的精度
		13.3.2 缓存时间精度的控制原理
	13.4 本章小结
第14章 nginx的内存管理
	14.1 内存池的逻辑结构
	14.2 内存池的管理
		14.2.1 创建内存池
		14.2.2 销毁内存池
		14.2.3 重置内存池
	14.3 内存的使用
		14.3.1 申请内存
		14.3.2 释放内存
		14.3.3 回收内存
	14.4 本章小结
第15章 nginx工作进程
	15.1 工作进程概览
	15.2 相关源码分析
		15.2.1 设置工作进程运行环境
		15.2.2 监听和处理进程控制事件
		15.2.3 接收网络请求事件
		15.2.4 执行进程控制
	15.3 nginx服务器进程间通信
		15.3.1 linux进程间通信方式
		15.3.2 linux进程间双工通信的实现
		15.3.3 通信通道的建立和设置
		15.3.4 通信通道的使用
		15.3.5 消息的读写
	15.4 本章小结
第16章 nginx的模块编程
	16.1 模块的种类
	16.2 模块开发实践
		16.2.1 “hello_nginx”模块编程实例
		16.2.2 模块的结构
		16.2.3 模块命名规则
	16.3 模块的编译与安装
	16.4 本章小结
第17章 nginx在动态网站建设中的应用实例
	17.1 nginx在jsp网站建设中的应用
		17.1.1 环境描述
		17.1.2 特别模块说明
		17.1.3 配置方案
	17.2 nginx在php网站建设中的应用
		17.2.1 环境描述
		17.2.2 特别模块说明
		17.2.3 配置方案
	17.3 nginx+perl脚本在网站建设中的应用
		17.3.1 环境描述
		17.3.2 特别模块说明
		17.3.3 配置方案
	17.4 本章小结
第18章 nginx经典应用——lnamp
	18.1 lnamp概述
	18.2 手动部署和配置
		18.2.1 环境准备
		18.2.2 安装和配置mysql
		18.2.3 安装和配置apache
		18.2.4 安装 php
	18.3 自动安装
	18.4 本章小结
附录a nginx内置变量
附录b 正则表达式语法
```
